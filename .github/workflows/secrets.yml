name: Get Secrets Info

on:
  workflow_dispatch:

jobs:
  get-secrets:
    runs-on: ubuntu-latest
    steps:
      - name: Obtendo Secrets
        run: |
          count_secret=$(curl -L -H "Accept: application/vnd.github+json" -H "Authorization: Bearer ${{ secrets.GHTOKEN }}" -H "X-GitHub-Api-Version: 2022-11-28" https://api.github.com/orgs/${{ github.repository_owner }}/actions/secrets  | jq .total_count)
          secrets=$(curl -L -H "Accept: application/vnd.github+json" -H "Authorization: Bearer ${{ secrets.GHTOKEN }}" -H "X-GitHub-Api-Version: 2022-11-28" https://api.github.com/orgs/${{ github.repository_owner }}/actions/secrets  | jq .secrets)

          final_count_secret=$(($count_secret - 1))

          for i in $(seq 0 $final_count_secret)
          do
              echo $secrets | jq .[$i].name
          done